!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}var s=n(1),i=r(s),o=n(2),u=r(o),l=n(3),d=r(l),c=n(4),f=r(c),p=n(24),v=r(p),h=n(29),m=a(h),b=n(35);i["default"].config.debug=!0;var y=new u["default"]({history:!G.hashbang,hashbang:G.hashbang,saveScrollPosition:!0,root:G.root}),g={gotoHome:function(){this.go({name:"home"})},replaceToHome:function(){this.replace({name:"home"})},gotoSecure:function(){this.go({name:"secure"})},replaceToSecure:function(){this.replace({name:"secure"})},gotoResult:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.go({name:"result",params:{type:e},query:t})}};m.each(g,function(e,t){return y[t]=e});var w={env:n(16),api:window.elegantApi(v["default"]),cache:n(37),local:n(17),utils:m,alert:b.alert,router:y,confirm:b.confirm};m.each(w,function(e,t){t="$"+t,window[t]=e,i["default"].prototype[t]=e}),i["default"].prototype.$validate=n(38),i["default"].prototype.$classSet=n(39),i["default"].prototype.$reload=function(){for(var e=this,t=arguments.length,n=Array(t),a=0;t>a;a++)n[a]=arguments[a];n.forEach(function(t){return e.$set(t,m.clone(e.$get(t)))})},i["default"].prototype.$observe=function(e,t){var n=this,a=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r="debounce"in a?a.debounce:500,s=void 0;return this.$watch(e,function(e,a){r?(clearTimeout(s),s=setTimeout(function(){t.call(n,e,a)},r)):t.call(n,e,a)},a)},i["default"].mixin(n(40)),i["default"].mixin(n(41)),i["default"].component("nav-bar",n(42)),i["default"].component("field",n(43)),i["default"].component("row",n(44)),i["default"].component("address-list-item",n(45)),i["default"].mixin({data:function(){return{isLoading:!1}}}),i["default"].directive("loading",n(46)),i["default"].directive("ladda",n(47)),i["default"].filter("emailMask",n(48)),i["default"].filter("emailVendor",n(49)),y.map(f["default"]),y.beforeEach(function(e){var t=e.from.router,n=t&&t.app&&t.app.$children&&t.app.$children[0],a=n&&n.$options.beforeLeave;"function"!=typeof a||a(e)?e.next():e.abort()}),y.afterEach(function(e){var t=e.from,n=e.to,a=t.router,r=a&&a.app&&a.app.$children&&a.app.$children[0],s=r&&r.$options.afterLeave;"function"==typeof s&&s(e),n.name&&document.documentElement.setAttribute("route",n.name)}),y.start(d["default"],"body")},function(e,t){e.exports=Vue},function(e,t){e.exports=VueRouter},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={name:"Root",data:function(){return{dialog:null}},methods:{signOut:function(){this.$confirm("确定要退出吗？",function(e){e&&location.replace(G.signOutBase+encodeURIComponent(location.href))})},weixinFilter:function(e){if("weixin"===e.key&&!this.$env.platform.isWeixin){if(!e.isBind)return this.$alert("浏览器中无法绑定，请关注微信公众号“沪江”后在微信公众号中操作"),!0;if(e.isBind&&this.$env.mobile.isAny)return this.$alert("手机浏览器中无法解绑，请用微信或在电脑上访问"),!0}}}},e.exports=t["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),r=n(6),s=r.keys().reduce(function(e,t){var n=r(t);return t=t.replace(/^\.\/|\..*$/g,""),"function"==typeof n&&(n=n()),e[t]={name:a.kebab(t),component:n},e},{});t["default"]={"/":s.Home,"/secure":s.Secure,"/address":s.Address,"/address/:type":s.AddressEditor,"/address/select/city":s.SelectCity,"/basic":s.BasicEditor,"/switcher/:type":s.Switcher,"/email/:type":s.EmailEditor,"/mobile/:type":s.MobileEditor,"/verify/old-mobile":s.VerifyOldMobile,"/password/:type":s.PasswordEditor,"/:type/result":s.Result,"/reset":s.Reset},e.exports=t["default"]},function(e,t){"use strict";function n(e,t){return e.match(u).reduce(t,"")}function a(e,t,n){var s=e;if(o(e)){s={};for(var u in e)e.hasOwnProperty(u)&&(s[r(u,n,t,e)]=1===t?e[u]:a(e[u],t>1?t-1:t,n))}else if(i(e)){s=[];for(var l=0;l<e.length;l++)s.push(a(e[l],t,n))}return s}function r(e,t,n,a){if("string"==typeof t&&t in l)return l[t](e);if("function"==typeof t){var r=t(e,n,a);if(!r)return e;if("string"==typeof r)return r;throw new Error("Transform naming function should return a valid string value!")}throw new Error("Not supported transform naming type, only support `string` and `function`")}function s(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function i(e){return"array"===s(e)}function o(e){return"object"===s(e)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(e+"+(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),l={camel:function(e){return n(e,function(e,t,n){var a=n?"toUpperCase":"toLowerCase";return e+t.charAt(0)[a]()+t.slice(1)})},cap:function(e){return n(e,function(e,t,n){return e+t.charAt(0).toUpperCase()+t.slice(1)})},kebab:function(e){return n(e,function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})},snake:function(e){return n(e,function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})}},d=l.camel,c=l.cap,f=l.kebab,p=l.snake;t.camel=d,t.cap=c,t.kebab=f,t.snake=p,t["default"]=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=t.deep,s=void 0===n?0:n,i=t.naming,o=void 0===i?"camel":i;return"string"==typeof e?r(e,o,s,null):a(e,s,o)}},function(e,t,n){function a(e){return n(r(e))}function r(e){return s[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var s={"./Address.js":7,"./AddressEditor.js":8,"./BasicEditor.js":9,"./EmailEditor.js":10,"./Home.js":11,"./MobileEditor.js":13,"./PasswordEditor.js":14,"./Reset.js":15,"./Result.js":18,"./Root.js":3,"./Secure.js":20,"./SelectCity.js":21,"./Switcher.js":22,"./VerifyOldMobile.js":23};a.keys=function(){return Object.keys(s)},a.resolve=r,e.exports=a,a.id=6},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n='<div class="vm-address" :class="{\'is-managing\': isManaging}">\n  <nav-bar :on-back="onBack">\n    管理收货地址\n    <a slot="right" @click="manage" class="nav-rigth-edit no-select" :disabled="!list || !list.length">\n      {{isManaging ? \'完成\' : \'管理\'}}\n    </a>\n  </nav-bar>\n\n  <div v-loading>\n    <div v-if="list && list.length" class="address-list">\n      <address-list-item\n        :is-edit="isManaging" v-for="item in list"\n        :checked="item.checked"\n        :data="item.addr"\n        @click="clickItem(item)"></address-list-item>\n    </div>\n    <div v-else class="no-address">\n      <p>还没有收货地址，赶快添加方便收货哦~</p>\n    </div>\n  </div>\n\n  <div class="bottom">\n    <a class="btn" @click="deleteItems" v-if="isManaging" v-ladda="isAsync" :disabled="disableDelete || isAsync">删除</a>\n\n    <a class="btn" v-else\n      v-link="{ name: \'address-editor\', params: {type: \'add\'} }"\n      :disabled="disableAdd || isLoading">\n\n      {{disableAdd ? \'已达到5个地址上限\' : \'添加收货地址\'}}\n    </a>\n  </div>\n</div>';t["default"]={name:"Address",template:n,data:function(){return{list:null,isManaging:!1}},computed:{disableAdd:function(){return this.list&&this.list.length>=5},disableDelete:function(){return this.list&&0===this.list.filter(function(e){return e.checked}).length}},methods:{onBack:function(){return this.$router.gotoHome(),!1},manage:function(){this.isManaging=!this.isManaging},clickItem:function(e){this.isManaging?e.checked=!e.checked:this.$router.go({name:"address-editor",params:{type:"edit"},query:{id:e.addr.addressId}})},deleteItems:function(){var e=this;this.$confirm("确定要删除该地址吗？",function(t){t&&!function(){var t=e.async(),n=e.list.filter(function(e){return e.checked}).map(function(e){return e.addr.addressId});e.$api.removeAddress({addressids:n}).then(function(){return e.list=e.list.filter(function(e){return!e.checked}),e.$options.loading.apply(e)})["catch"](function(t){return e.$alert(t.message)})["finally"](function(){e.isManaging=!1,t()})}()})}},loading:function(){var e=this;return this.$api.getAddressList().then(function(t){e.list=t.map(function(e){return{checked:!1,addr:e}})})}},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n='<form class="vm-editor vm-address-editor" @submit.prevent="submit">\n  <nav-bar :on-back="onBack">管理收货地址</nav-bar>\n\n  <div v-loading>\n    <div v-if="address">\n      <field placeholder="收货人姓名" :value.sync="address.name">\n        <p slot="extra" class="field-error">{{error.name}}</p>\n      </field>\n      <field placeholder="手机号码" :value.sync="address.mobile" type="tel">\n        <p slot="extra" class="field-error">{{error.mobile}}</p>\n      </field>\n      <field placeholder="邮政编码（选填）" :value.sync="address.zipcode" type="number">\n        <p slot="extra" class="field-error">{{error.zipcode}}</p>\n      </field>\n\n      <row :label="areasString || \'省市\'"\n        :class-name="areasString ? \'hasCity\' : \'\'"\n        :no-value="true"\n        @click="gotoSelectCity">\n        <p slot="extra" class="field-error">{{error.areasString}}</p>\n      </row>\n\n      <field class-name="address-field" :value.sync="address.address" placeholder="详细地址">\n        <p slot="extra" class="field-error">{{error.address}}</p>\n      </field>\n\n      <input id="is-default" v-model="address.isDefault" type="checkbox" class="is-default hidden">\n      <label for="is-default" class="set-default no-select v-center-before">设为默认地址</label>\n\n      <div class="absolute-bottom">\n        <button class="btn" v-ladda="isAsync" :disabled="disabledSubmit" type="submit">保存</button>\n      </div>\n    </div>\n  </div>\n</form>';t["default"]={name:"AddressEditor",template:n,data:function(){return{address:null,error:{name:"",mobile:"",zipcode:"",areasString:"",address:""}}},computed:{disabledSubmit:function(){return this.isAsync},type:function(){return this.$route.params.type},areas:function a(){var a=this.$cache.del("selected-city");return a||(a=this.address&&this.address.areas),a||[]},areasString:function(){return this.areas.map(function(e){return e[1]}).join(" ")}},loading:function(e){var t=this,n=this.$cache.del("address-before-select-city");if(n)this.address=n;else{if("edit"===this.type)return this.$api.getAddress({id:this.$route.query.id}).then(function(e){e.areas=["province","city","area"].filter(function(t){return e[t]}).map(function(t){return[e[t],e[t+"Name"]]}),t.address=e,t.cache()});this.address={addressId:0,name:"",mobile:"",zipcode:"",province:0,city:0,area:0,address:"",isDefault:!1},this.cache()}e()},beforeDestroy:function(){window.onbeforeunload=null},methods:{onBack:function(){return this.isUpdated()?(this.$confirm("要放弃编辑地址吗？",function(e){e&&history.back()}),!1):!0},gotoSelectCity:function(){this.$cache.set("address-before-select-city",this.address),this.$router.go({name:"select-city",query:{areas:JSON.stringify(this.areas)}})},cache:function(){var e={};for(var t in this.address)e[t]=this.address[t];this.$cache.set("address",e),this.$cache.set("address-areas",this.areasString)},isUpdated:function(){var e=this.$cache.get("address"),t=this.$cache.get("address-areas");if(t&&t!==this.areasString)return!0;if(e)for(var n in e)if(this.address[n]!==e[n])return!0;return!1},validate:function(){var e=this;return Object.keys(this.error).forEach(function(t){var n="areasString"===t?e.areasString:e.address[t],a=e.$validate.rules.addr;"zipcode"!==t&&(e.error[t]=n?"":"*必填*"),("zipcode"===t||!e.error[t]&&t in a)&&(e.error[t]=e.$validate(n,"addr."+t).message)}),Object.keys(this.error).every(function(t){return!e.error[t]})},watch:function(){return this.$watch("address",this.validate.bind(this),{deep:!0})},save:function(){var e=this,t=this.$utils.pick(this.address,["addressId","name","mobile","zipcode","address","isDefault"]);return["province","city","area"].forEach(function(n,a){t[n]=e.areas[a]?e.areas[a][0]:0}),this.$api.setAddress(t).then(function(){e.$cache.del("address"),e.$cache.del("address-areas"),e.$router.go({name:"address"})})["catch"](function(t){return e.$alert(t.message)})}}},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n='<form class="vm-basic-editor vm-editor" @submit.prevent="submit">\n  <nav-bar>{{title}}</nav-bar>\n\n  <field :value.sync="value" :show-clear="true"></field>\n\n  <div class="gap">\n    <p class="field-tip">{{ tips[field] || \'\' }}</p>\n    <p class="field-error">{{ error }}</p>\n\n    <!-- 只有签名可以设置成空 -->\n    <button class="btn" v-ladda="isAsync" :disabled="disabledSubmit" type="submit">保存</button>\n  </div>\n</form>';t["default"]={name:"BasicEditor",template:n,data:function(){return{tips:{username:"用户名中不可包含特殊字符如：%、*，不超过20个字符。用户名每半年可修改一次，修改后则用修改后的用户名登录。"},value:"",error:""}},computed:{disabledSubmit:function(){return"bio"!==this.field&&!this.value||this.isAsync},field:function(){var e=this.$route.query;return"nickname"in e?"nickname":"username"in e?"username":"bio"},title:function(){var e={nickname:"昵称",username:"用户名",bio:"签名"};return"修改"+e[this.field]}},created:function(){this.value=this.$route.query[this.field],this.oldValue=this.value},methods:{validate:function(){return this.error=this.$validate(this.value,[this.field]).message,!this.error},watch:function(){return this.$watch("value",this.validate.bind(this))},save:function(){var e=this,t=this.$api.$resource("user");return t[this.field]=this.value,this.value===this.oldValue?this.$router.gotoHome():this.$api.setUserBase(t).then(function(t){if("username"===e.field){var n=function(){var n=window.G;return{v:Promise.all(n.syncDomains.map(function(a){return new Promise(function(r,s){var i="/quick/synclogin.aspx?remeberdays="+n.syncRemeberDays+"&token="+(t&&t.tiket);e.$http.jsonp(n.syncHost+a+i).then(r,s)})}))}}();if("object"==typeof n)return n.v}}).then(function(){return e.$router.gotoHome()})}}},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n='<form class="vm-email-editor vm-editor" @submit.prevent="submit">\n  <nav-bar>{{* type === \'active\' ? \'邮箱激活\' : cnType + \'邮箱\' }}</nav-bar>\n\n  <p class="top-tip" v-if="type === \'active\'">请输入邮箱账号</p>\n  <p class="top-tip" v-if="type === \'bind\'">请输入邮箱账号绑定</p>\n  <p class="top-tip" v-if="type === \'unbind\'">已绑定邮箱 {{* $route.query.value }}</p>\n\n  <field type="email" :value.sync="value"></field>\n\n  <div class="gap">\n    <p class="field-error">{{ error }}</p>\n    <button class="btn" v-ladda="isAsync" :disabled="disabledSubmit" type="submit">{{* cnType }}</button>\n  </div>\n</form>';t["default"]={name:"EmailEditor",template:n,data:function(){return{type:"",cnType:"",value:"",error:""}},computed:{disabledSubmit:function(){return!this.value||this.isAsync}},created:function(){var e={bind:"绑定",unbind:"解绑",active:"发送激活邮件"},t=this.$route.params.type;t in e||(t="bind"),this.type=t,this.cnType=e[t]},methods:{validate:function(){return this.error=this.$validate(this.value,["email"]).message,!this.error},watch:function(){return this.$watch("value",this.validate.bind(this))},save:function(){var e=this.type,t=this.value,n=this.$api,a=this.$router;return"active"===e&&(e="bind"),"unbind"===e?n.unbindEmail({email:t}).then(function(){return a.gotoSecure()}):"bind"===e?n.email({email:t,type:e}).then(function(){a.go({name:"result",params:{type:"verify-email"},query:{value:t}})}):void 0}}},e.exports=t["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(12),r=a.rows([{type:"avatar",label:"头像",editable:!1,value:":user.avatar"},{label:"用户名",value:":user.username",defaultValue:"去设置",editable:":auth.leftDays ? false : true",vLink:'auth.leftDays ? null : {name: "basic-editor", query: {username: user.username || ""}}',notice:':auth.leftDays ? "还有" + auth.leftDays + "天才可以修改哦～" : ""'},{label:"昵称",value:":user.nickname",defaultValue:"去设置",vLink:'{name: "basic-editor", query: {nickname: user.nickname || ""}}'},{label:"签名",value:":user.bio",defaultValue:"说点什么吧~",vLink:'{name: "basic-editor", query: {bio: user.bio || ""}}'}],['<div class="row-container">\n      <row label="生日" :value="user.birthday" defaultValue="去设置"></row>\n      <input type="date" id="birthday" name="birthday" v-model="userBirthday">\n    </div>','<div class="row-container">\n      <row label="性别" :value="selectedGender" defaultValue="去设置"></row>\n      <select id="gender" name="gender" v-model="userGender">\n        <option v-for="gender in genders" :value="$index"> {{ gender }} </option>\n      </select>\n    </div>',{type:"double",label:"收货地址",value:":user.fullAddress",vLink:{name:"address"},defaultValue:"添加收获地址课本可以寄到这里哦~"}],[{label:"帐号与安全",vLink:{name:"secure"}}],[{type:"button",className:"button-red",label:"退出登录",editable:!1,click:"@$root.signOut"}]),s='<div class="vm-home">\n  <nav-bar :show-active="!auth.active">个人中心</nav-bar>\n  <div v-loading>\n    <div v-if="user">\n      '+r+"\n    </div>\n  </div>\n</div>";t["default"]={name:"Home",template:s,data:function(){return{auth:{active:!0},user:null,genders:["女","男","保密"]}},computed:{selectedGender:function(){var e=this.genders[2];return this.user&&"gender"in this.user?this.genders[this.user.gender]||e:e},userBirthday:{get:function(){return this.user?this.user.birthday:""},set:function(e){var t=new Date(e).getFullYear(),n=(new Date).getFullYear(),a=1900;n>t&&t>a&&(this.user.birthday=e)}},userGender:{get:function(){return this.user?this.user.gender:2},set:function(e){this.user.gender=e}}},loading:function(){var e=this;return this.$api.$request({getUserBase:!0,getUserAuth:!0}).then(function(t){e.user=t.getUserBase,e.auth=t.getUserAuth})},ready:function(){var e=this;this.$watch(function(){return e.user&&e.user.gender+e.user.birthday},function(t,n){if(null==n)return!1;var a=e.$api.$resource("user");a.gender=e.user.gender,a.birthday=e.user.birthday,e.$api.setUserBase(a)["catch"](function(t){return e.$alert(t.message)})})}},e.exports=t["default"]},function(e,t,n){"use strict";function a(e,t){var n=arguments.length<=2||void 0===arguments[2]?"":arguments[2];return e=o.kebab(e),t=Object.keys(t).reduce(function(e,n){var a=t[n];return"string"!=typeof a?(a=JSON.stringify(a),l.test(n)||/^v[\-_A-Z]/.test(n)||(n=":"+n)):/^[:@]/.test(a)&&!l.test(n)&&(n=a[0]+n,a=a.substr(1)),n=n.replace(u,function(e,t,n){return t+o.kebab(n)}),e.push(n+"='"+a+"'"),e},[]),t=t.length?" "+t.join(" "):"","<"+e+t+">"+n+"</"+e+">"}function r(e,t,n){return t.map(function(t){return"string"==typeof t?t:a(e,t,n)}).join("\n")}function s(e){return a("row",e)}function i(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return t.map(function(e){return'<div class="rows">'+r("row",e)+"</div>"}).join("\n")}Object.defineProperty(t,"__esModule",{value:!0}),t.mix=a,t.mixs=r,t.row=s,t.rows=i;var o=n(5),u=/([:@]?)([\-\w]+)$/,l=/[:@]/},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a='<form @submit.prevent="submit" class="vm-editor vm-mobile-editor">\n  <nav-bar>{{* title}}</nav-bar>\n\n  <field type="tel" :label="map.label" :value.sync="mobile" :placeholder="map.placeholder"></field>\n  <field label="图片验证码：" :value.sync="captcha" placeholder="请输入图片验证码">\n    <img slot="extra" v-show="captchaUrl" @click="refreshCaptcha" class="qrcode" :src="captchaUrl">\n  </field>\n  <field type="number" label="手机验证码：" :value.sync="sms" placeholder="请输入手机验证码">\n\n    <a slot="extra" @click="fetchSMSCode"\n      :disabled="fetchTimeout > 0 || !mobile || !captcha || mobileFormatError"\n      class="btn btn-empty btn-fetch-sms">\n\n      获取验证码{{ fetchTimeout > 0 ? "(" + fetchTimeout + ")" : "" }}\n    </a>\n\n  </field>\n\n  <div class="gap">\n    <p class="field-error">{{ error }}</p>\n\n    <button class="btn"\n      v-ladda="isAsync"\n      :disabled="disabledSubmit"\n      type="submit">提交</button>\n\n  </div>\n</form>',r={bind:{title:"绑定手机",label:"手机号：",placeholder:"请输入手机号码"},unbind:{title:"解绑手机",label:"原手机：",placeholder:"请输入原手机号码"},update:{title:"更换手机",label:"新手机：",placeholder:"请输入新手机号码"},active:{title:"手机激活",label:"手机号：",placeholder:"请输入手机号码"},reset:{title:"重置密码",label:"原手机：",placeholder:"请输入原手机号码"}};t["default"]={name:"MobileEditor",template:a,data:function(){return{title:"",type:"",map:null,mobile:"",captcha:"",sms:"",error:"",mobileFormatError:"",token:"",captchaBaseUrl:"",captchaUrl:"",fetchTimeout:this.$local.get("fetchTimeout",0)}},computed:{disabledSubmit:function(){return this.isAsync||!this.sms||!this.mobile||!this.captcha||this.mobileFormatError}},created:function(){var e=this.type=this.$route.params.type;this.map=r[e],this.title=this.map.title},ready:function(){var e=this;this.$http.jsonp("http://captcha.yeshj.com/api.php?w=95&h=29&t="+Date.now()).then(function(t){e.token=t.data.token,e.captchaBaseUrl=t.data.img,e.captchaUrl=e.captchaBaseUrl}),this.$observe("mobile",this.validate.bind(this)),this.fetchTimeout&&this.countDown()},methods:{refreshCaptcha:function(){this.captchaUrl=this.captchaBaseUrl+"&v="+Math.random().toString(16).substr(-8)},countDown:function(){var e=this;setTimeout(function(){e.fetchTimeout=e.fetchTimeout-1,e.$local.set("fetchTimeout",e.fetchTimeout,e.fetchTimeout),e.fetchTimeout>0&&e.countDown()},1e3)},fetchSMSCode:function(){var e=this;this.fetchTimeout=15,this.countDown(),this.$api.sms(this.$utils.pick(this,["captcha","mobile","type","token"]))["catch"](function(t){e.fetchTimeout=0,e.setTimeoutError(t.message),e.refreshCaptcha()})},validate:function(){return this.error=this.$validate(this.mobile,["mobile"]).message,this.mobileFormatError=!!this.error,!this.error},save:function(){var e=this,t=this.$utils,n=this.$router,a=this.type,r="reset"===a?"resetMobile":"mobile";return this.$api[r](t.pick(this,["sms","mobile","type"])).then(function(){"reset"===a?n.go({name:"password-editor",params:{type:"reset"}}):"active"===a?n.gotoHome():n.gotoSecure()})["catch"](function(t){return e.setTimeoutError(t.message),e.refreshCaptcha(),Promise.reject(t)})}}},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n='<form class="vm-editor vm-password-editor" @submit.prevent="submit">\n  <nav-bar>{{* title }}密码</nav-bar>\n\n  <field type="password" :value.sync="password" v-if="type === \'update\'" label="原密码：" placeholder="请输入原密码">\n    <p slot="extra" class="field-error">{{error.password}}</p>\n  </field>\n  <field type="password" :value.sync="newpassword" label="新密码：" placeholder="请输入新密码">\n    <p slot="extra" class="field-error">{{error.newpassword}}</p>\n  </field>\n  <field type="password" :value.sync="newpassword2" label="确认新密码：" placeholder="请再次输入新密码">\n    <p slot="extra" class="field-error">{{error.newpassword2}}</p>\n  </field>\n\n  <div class="gap" :class="{\'has-reset-tip\': type === \'update\'}">\n    <p class="field-error">{{ xhrError }}</p>\n\n    <p class="reset-tip"v-if="type === \'update\'">\n      不记得密码？ 去<a v-link="{name: \'reset\'}">重置</a>\n    </p>\n\n    <button class="btn"\n      v-ladda="isAsync" type="submit"\n      :disabled="disabledSubmit">保存</button>\n  </div>\n</form>',a={bind:"设置",update:"修改",reset:"重置"};t["default"]={name:"PasswordEditor",template:n,data:function(){return{type:"",title:"",password:"",newpassword:"",newpassword2:"",error:{password:"",newpassword:"",newpassword2:""}}},computed:{disabledSubmit:function(){return this.isAsync||!this.newpassword||!this.newpassword2}},created:function(){var e=this.type=this.$route.params.type;this.title=a[e]},methods:{validate:function(){var e=this.error;return this.xhrError="",e.newpassword=this.$validate(this.newpassword,["password"]).message,e.newpassword2=this.newpassword===this.newpassword2?"":"两次输入的密码不一致","update"===this.type&&(e.password=this.$validate(this.password,["required"]).message),Object.keys(e).every(function(t){return!e[t]})},watch:function(){return this.$watch("password + newpassword + newpassword2",this.validate.bind(this))},save:function(){var e=this,t=this.$utils.pick(this,["type","password","newpassword"]);return t.password=md5(t.password),t.newpassword=md5(t.newpassword),this.$api.password(t).then(function(){return e.$router.gotoResult("password-setting")})}}},e.exports=t["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(12),r=n(16),s=[{label:':"用邮箱" + user.email + "重置"',vIf:"resets.email",click:"@clickOnEmail",noValue:!0,isLoading:":isSendingResetEmail"},{label:':"用手机" + user.mobile + "重置"',vIf:"resets.mobile",vLink:'isSendingResetEmail ? null : {name: "mobile-editor", params: {type: "reset"}}',noValue:!0}];r.config.vendors.map(function(e){var t=e.key,n=e.label;s.push({label:"用"+n+"重置",click:"@clickOnVendor(vendors."+t+")",vIf:"resets."+t,noValue:!0})});var i='<div class="vm-reset">\n  <nav-bar>重置密码</nav-bar>\n\n  <div v-loading>\n    <div v-if="user && !noResets">\n      <p class="slogan">原帐号 <span class="dark">{{* user.username }}</span>，请选择重置方式</p>\n      '+a.rows(s)+'\n    </div>\n\n    <div v-if="noResets" class="vm-result">\n      <div class="gap details face">\n        <p class="tip text-indent">未绑定任何安全信息，无法重置，请进行帐号申诉重置密码。</p>\n        <a class="btn" target="_black" href="http://kefu.hujiang.com/shensu/">去申诉</a>\n      </div>\n    </div>\n\n  </div>\n</div>';t["default"]={name:"Reset",template:i,data:function(){return{user:null,auth:null,vendors:null,resets:{},noResets:!1,isSendingResetEmail:!1}},methods:{clickOnVendor:function(e){this.isSendingResetEmail||this.$env.open(e.loginUrl)},clickOnEmail:function(){var e=this;return this.isSendingResetEmail?!1:(this.isSendingResetEmail=!0,void this.$api.email({type:"reset",email:this.user.email}).then(function(){e.$router.go({name:"result",params:{type:"email-reset-password"},query:{value:e.user.email}})})["catch"](function(t){return e.$alert(t.message)})["finally"](function(){return e.isSendingResetEmail=!1}))}},loading:function(){var e=this;return this.$api.$request({getUserBase:!0,getUserAuth:!0,getUserVendors:{type:1}}).then(function(t){var n=t.getUserBase,a=t.getUserAuth,r=t.getUserVendors;e.user=n,e.auth=a,e.vendors=r,e.resets={email:1===a.emailStatus,mobile:!!n.mobile,qq:a.vendor.qq,weibo:a.vendor.sina,weixin:a.vendor.weixin},e.noResets=Object.keys(e.resets).every(function(t){return!e.resets[t]})})}},e.exports=t["default"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(){return window!==window.top}Object.defineProperty(t,"__esModule",{value:!0});var s=n(17),i=a(s),o={vendors:[{key:"qq",label:"QQ"},{key:"weixin",label:"微信"},{key:"weibo",label:"微博"}]},u={},l={},d=navigator.userAgent,c=location.search.slice(1).split("&").reduce(function(e,t){return t=t.split("=").map(decodeURIComponent),e[t[0]]=t[1],e},{});u.isIOS=/iP(ad|hone|od)/.test(d),u.isAndroid=/Android/i.test(d),u.isAny=u.isIOS||u.isAndroid||/BlackBerry|Opera Mini|IEMobile/i.test(d),l.isWeixin=/MicroMessenger/i.test(d)||"fake_weixin"in c,l.isQQ=/\bQQ\b/.test(d)||"fake_qq"in c,l.isWeibo=/\bWeibo\b/i.test(d)||"fake_weibo"in c,l.isAlipay=/AlipayClient/i.test(d)||"fake_alipay"in c,l.isAny=l.isWeixin||l.isQQ||l.isWeibo||l.isAlipay;var f={query:c,mobile:u,platform:l,config:o};f.open=function(e){l.isAny?location.href=e:window.open(e)},r()&&i["default"].get("eliminate.middle")&&window.top.reload(),t["default"]=f,e.exports=t["default"]},function(e,t){"use strict";function n(e){return o?e.call(o):void 0}function a(e,t,a){return n(function(){var n=a?Date.now()+a:0;this[u+e]=JSON.stringify([t,n])}),t}function r(e,t){return n(function(){var n=Date.now(),r=u+e,s=void 0;try{s=JSON.parse(this[r])}catch(i){console.warn("解析 Storage 中的 JSON 失败 --- services/local.jsx")}if(!s||2!==s.length||s[1]&&n>s[1]){var o=void 0,l=typeof t;return"undefined"===l?this.removeItem(r):(o="function"===l?t():t,a(e,o)),o}return s[0]})}function s(e){n(function(){this.removeItem(u+e)})}function i(e){n(function(){var t=void 0,n=void 0;for(t in this)n=0===t.indexOf(u),"self"===e&&!n||"other"===e&&n||this.removeItem(t)})}Object.defineProperty(t,"__esModule",{value:!0});var o=window.localStorage,u="__account_v1__";try{o.setItem("__","__"),o.removeItem("__")}catch(l){o=null}t["default"]={supported:!!o,set:a,get:r,del:s,empty:i},e.exports=t["default"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),s=a(r),i={"verify-email":"验证邮箱","email-reset-password":"重置密码","password-setting":"设置成功",bind:"绑定失败",operate:"操作失败"},o='<div class="vm-result vm-{{type}}-result">\n  <nav-bar :on-back="onBack">{{* title }}</nav-bar>\n\n  <div class="gap details" v-if="type === \'verify-email\'">\n    <p class="tip">已向帐号 <span class="dark">{{ value | emailMask }}</span> 发送验证链接，请在30分钟内点击验证，验证后才可以绑定成功。</p>\n    <a class="btn" target="_black" href="{{ value | emailVendor }}">去验证</a>\n  </div>\n\n  <div class="gap details" v-if="type === \'email-reset-password\'">\n    <p class="tip">已向你绑定的邮箱 <span class="dark">{{ value }}</span> 发送重置邮件，请在30分钟内登录邮箱验证并修改密码，超过30分钟验证链接将过期，请重新验证。</p>\n    <a class="btn" target="_black" href="{{ value | emailVendor }}">登录邮箱</a>\n  </div>\n\n  <div class="gap details face face-smile" v-if="type === \'password-setting\'">\n    <p class="tip text-center">密码设置成功！</p>\n    <a class="btn" @click="onBack">确定</a>\n  </div>\n\n  <div class="gap details face face-sad" v-if="type === \'bind\'">\n    <p class="tip">\n      帐号绑定失败，有可能是以下原因：<br/>1. {{error || \'该帐号已绑定其他沪江帐号\'}}\n    </p>\n    <a class="btn" v-link="{name: \'secure\'}">重新绑定</a>\n  </div>\n\n  <div class="gap details face face-sad" v-if="type === \'operate\'">\n    <p class="tip text-center">{{ $route.query.error || \'错误次数过多，请一天后重试。\' }}</p>\n  </div>\n\n</div>';t["default"]={name:"Result",template:o,data:function(){return{type:"",title:"",error:"",value:""}},methods:{onBack:function(){return this.$router.replaceToSecure(),!1}},created:function(){var e=this.$route,t=e.params,n=e.query,a=this.type=t.type;this.title=n.title||i[a],this.value=n.value;var r=n.code;r&&(s["default"][r]?this.error=s["default"][r]:this.error="该帐号已绑定其他沪江帐号（错误码："+r+"）")}},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){var n=[],a=!0,r=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(u){r=!0,s=u}finally{try{!a&&o["return"]&&o["return"]()}finally{if(r)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a="\n1001  用户未登录\n1002  内部错误  # 列表返回数据为null\n1003  参数错误\n1004  图片验证码错误\n1006  短信验证码错误\n1008  错误次数过多，请重新获取\n1202  第三方帐号已绑定其它沪江帐号\n1203  沪江帐号已经绑定其它第三方帐号\n1301  用户名中含有特殊符号或敏感词\n1302  手机号已被使用\n1304  用户名已被使用\n1308  用户名和密码相同\n1303  Email地址已存在\n1401  60秒内不能重复发送短信\n1402  发送次数已达上限\n1501  手机号不存在\n1502  Email地址不存在\n1503  重置密码第一步未通过验证\n1504  邮件链接回跳地址，参数异常\n1505  第三方未绑定沪江帐号\n1506  Email链接失效\n1507  第三方信息获取失败\n2100  请求参数错误\n2101  不能修改用户名，距上次修改未满180天\n2102  签名信息无效，长度超过20或含有敏感字符\n2103  昵称信息无效，长度超过20或含有敏感字符\n2104  性别无效\n2105  生日无效\n2106  新用户名不能与原用户名相同\n2107  原邮件地址与新邮件地址相同\n2108  Email未填写或格式错误\n2109  用户已激活无需发送验证激活邮件\n2110  Email地址输入不正确\n2111  Email解绑错误次数过多\n2112  手机号格式错误\n2113  手机号输入错误\n2114  手机号解绑错误次数过多\n2115  原手机号未验证\n2116  原手机号与新手机号相同\n2117  手机号与原手机不符\n2118  手机号未绑定\n2119  短信验证码错误\n2120  密码已经设定过\n2121  删除收货地址失败\n2122  未设定过密码，无法解绑\n2123  收货地址非当前用户所有\n2124  收货地址超过限定数量\n2125  原密码输入错误\n2126  解绑第三方帐号失败\n2127  第三方帐号与当前用户不匹配\n2128  内部错误      # hjapi 请求失败\n2129  最后一条收货地址不能是非默认地址\n";t["default"]=a.trim().split(/[\r\n]+/).reduce(function(e,t){var a=t.replace(/#.*$/,"").trim().split("  "),r=n(a,2),s=r[0],i=r[1];return e[s]=i,e},{}),e.exports=t["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(12),r=n(16),s={},i=a.rows([{label:"密码",value:':auth.hasPassword ? "*****" : ""',defaultValue:"未设置",vLink:'{name: "password-editor", params: {type: auth.hasPassword ? "update" : "bind"}}'
},{label:"手机号码",value:":user.mobile",defaultValue:"未设置",vLink:'user.mobile ? {name: "switcher", params: {type: "mobile"}, query: {value: user.mobile}} :{name: "mobile-editor", params: {type: "bind"}}'},{label:"邮箱",value:":user.email",defaultValue:"未设置",vLink:'user.email ? {name: "switcher", params: {type: "email"}, query: {value: user.email, status: auth.emailStatus}} : {name: "email-editor", params: {type: "bind"}}'}],r.config.vendors.map(function(e){var t=e.key,n=e.label;s[t]=n;var a={type:"logo",label:"绑定"+n,value:':getVendorLogo("'+t+'")',notice:':getVendorNotice("'+t+'")',click:'@clickVendor("'+t+'")'};return"weixin"===t&&(a.isLoading=":isProcessing"),a})),o='<div class="vm-secure">\n  <nav-bar :on-back="onBack">帐号与安全</nav-bar>\n  <div v-loading>\n    <div v-if="user">'+i+"</div>\n  </div>\n</div>";t["default"]={name:"Secure",template:o,data:function(){return{user:null,auth:null,vendors:null,isProcessing:!1}},computed:{noticeVendor:function(){var e=this,t=0,n=void 0;if(this.user){if(this.auth.hasPassword)return null;r.config.vendors.forEach(function(a){e.vendors[a.key].isBind&&(t++,n=a.key)})}return 1===t?n:null}},methods:{onBack:function(){return this.$router.gotoHome(),!1},getVendorLogo:function(e){return this.vendors[e].isBind?e:""},getVendorNotice:function(e){return this.noticeVendor===e?"未设置密码且绑定唯一第三方帐号，不允许解绑":""},clickVendor:function(e){var t=this,n=this.vendors[e];return this.getVendorNotice(e)?!1:void(this.$root.weixinFilter(n)||(n.isBind?this.$confirm("确定要解除"+s[e]+"绑定吗",function(e){e&&t.$env.open(n.loginUrl)}):this.$env.open(n.loginUrl)))}},loading:function(e){var t=this;this.$api.$request({getUserBase:!0,getUserAuth:!0,getUserVendors:!0}).then(function(e){t.user=e.getUserBase,t.auth=e.getUserAuth,t.vendors=e.getUserVendors})["finally"](e)}},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n='<div class="vm-select-city">\n  <nav-bar>管理收货地址</nav-bar>\n\n  <div class="cities"\n    v-for="(index, level) in levels"\n    :class="\'level-\' + index + (activeLevel === index ? \' active\' : \' no-active\')">\n\n    <div class="city"\n      v-for="area in level"\n      @click="clickOnLevel(index, area)"\n      :class="getAreaClasses(index, area)">\n\n      <a class="link">{{ area[1] }}</a>\n    </div>\n  </div>\n\n  <div class="loading" v-show="isAsync"></div>\n\n</div>';t["default"]={name:"SelectCity",template:n,data:function(){return{activeLevel:0,values:[],levels:[[],[],[]],initedValues:[]}},methods:{getAreaClasses:function(e,t){var n=[];return this.values[e]&&this.values[e][0]===t[0]?n.push("selected","append-arrow"):this.initedValues[e]&&this.initedValues[e][0]-t[0]===0&&n.push("selected"),n},clickOnLevel:function(e,t){var n=this;if(this.isAsync)return null;var a=void 0,r=function(){n.$cache.set("selected-city",n.values),window.history.back()};return this.activeLevel===e?(this.activeLevel=e+1,this.values.push(t),this.levels.splice(e+1,1,[]),a=t[0]):(this.activeLevel=e,this.values.splice(e,10),a=0===e?0:this.values[e-1][0]),2===e?r():void this.load(a).then(function(e){0===e&&r()})},load:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],n=this.async();return this.$api.getAreas({id:t}).then(function(t){return t=t||[],e.levels.splice(e.activeLevel,1,t.map(function(e){return[e.id,e.areaName]})),n(),t.length})}},ready:function(){var e=this.$route.query.areas;if(e)try{e=JSON.parse(e),this.initedValues=this.$utils.clone(e),e.pop();var t=e.length;this.levels=e.map(function(e){return[e]}),this.values=e,this.activeLevel=t,this.load(t>0?e[t-1][0]:0)}catch(n){e=null}e||this.load()}},e.exports=t["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(12),r={email:"邮箱",mobile:"手机",active:"激活帐号"},s=a.rows([{label:"解绑手机",vLink:'{name: "mobile-editor", params: {type: "unbind"}}'},{label:"更换手机",vLink:'{name: "verify-old-mobile"}'}]),i=a.rows([{label:"验证邮箱",vShow:'$route.query.status === "2"',isLoading:":isProcessing",click:"@verifyEmail"},{label:"解绑邮箱",vLink:'isProcessing ? null : {name: "email-editor", params: {type: "unbind"}, query: {value: $route.query.value}}'}]),o=a.rows([{label:"绑定邮箱激活",vLink:'{name: "email-editor", params: {type: "active"}}'},{label:"绑定手机激活",vLink:'{name: "mobile-editor", params: {type: "active"}}'},{label:"绑定微信激活",click:"@clickOnVendor(vendors.weixin)"},{label:"绑定微博激活",click:"@clickOnVendor(vendors.weibo)"},{label:"绑定QQ激活",click:"@clickOnVendor(vendors.qq)"}]),u='<div class="vm-switcher">\n  <nav-bar>{{* title }}</nav-bar>\n\n  <div v-if="type === \'active\'" v-loading>\n    <p class="slogan">\n      账号<span class="dark">{{user && user.username}}</span>，请选择激活方式\n    </p>\n    <div>'+o+'</div>\n  </div>\n\n\n  <div v-else>\n    <p class="slogan">\n      已绑定{{* title }} <span class="dark">{{* $route.query.value}}</span>\n    </p>\n    <div v-if="type === \'mobile\'">'+s+"</div>\n    <div v-else>"+i+"</div>\n  </div>\n</div>";t["default"]={name:"Switcher",template:u,data:function(){return{isProcessing:!1,title:"",type:"",user:null,vendors:{}}},created:function(){var e=this.$route.params.type;e in r||(e="email"),this.type=e,this.title=r[this.type]},loading:function(){var e=this;return this.$api.$request({getUserBase:!0,getUserVendors:!0}).then(function(t){var n=t.getUserBase,a=t.getUserVendors;e.user=n,e.vendors=a})},methods:{clickOnVendor:function(e){this.$root.weixinFilter(e)||this.$env.open(e.loginUrl)},verifyEmail:function(){var e=this;if(this.isProcessing)return!1;this.isProcessing=!0;var t=void 0;this.$api.getUserBase().then(function(n){return t=n.email,e.$api.email({type:"verify",email:t})}).then(function(n){e.$router.go({name:"result",params:{type:"verify-email"},query:{value:t}})})["catch"](function(t){return e.$alert(t.message)})["finally"](function(){e.isProcessing=!1})}}},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n='<form @submit.prevent="submit" class="vm-editor vm-old-mobile-verify">\n  <nav-bar>更换手机</nav-bar>\n\n\n  <field label="原手机：" type="tel" placeholder="请输入原手机号码" :value.sync="value"></field>\n\n  <div class="gap">\n    <p class="field-error">{{ error }}</p>\n    <button class="btn" v-ladda="isAsync" :disabled="!this.value || isAsync" type="submit">提交</button>\n  </div>\n\n</form>';t["default"]={name:"VerifyOldMobile",template:n,data:function(){return{value:"",error:""}},methods:{validate:function(){return this.error=this.$validate(this.value,["mobile"]).message,!this.error},watch:function(){return this.$watch("value",this.validate.bind(this))},save:function(){var e=this;return this.$api.verifyOldMobile({mobile:this.value}).then(function(){e.$router.go({name:"mobile-editor",params:{type:"update"}})})}}},e.exports=t["default"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){!e.data&&!0&&(e.data={status:0,message:"OK",data:null});var n=function(e,t,n){var a=e||{},s=a.data,i=a.message,u=a.status,l=void 0;return t?(l="网络异常，请稍后再试",u=-1):0!==u&&(l=i||o.Errors[u]||"未知错误，状态码 "+u),l&&(t=new Error(l),t.status=u,t.message=l),console.debug("RESPONSE %s %s %o",r.method,r.url,e),n(t,s)},a=e.data,r=e.http,s=e.error;return console.info("REQUEST %s %s %o",r.method,r.url,e),this.mock.memory?n(a,s,t):void i["default"].http(r).then(function(e){return n(e.data,null,t)})["catch"](function(e){return n(null,e,t)})}var s=n(1),i=a(s),o=n(25);o.eaOptions.handle=r,e.exports=o.eaOptions},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e){return function(t){var n=t.gettype;return n&&n in e&&(t.gettype=e[n]),t}}function s(e){return e=e||{},["province_name","city_name","area_name","address"].map(function(t){return e[t]||""}).join("")}var i=n(19),o=a(i),u=void 0,l={},d=!0;!function(){u=n(26).env.memory;var e=n(27);e.keys().map(function(t){return l[t.replace(/^\.\/|\.(json|js)$/g,"")]=e(t)}),console.log("Errors: %o    Mocks: %o",o["default"],l)}(),e.exports={Errors:o["default"],eaOptions:{base:"/account/api",mock:{disabled:!d,memory:!u&&d,server:u?"http://"+u.host+":"+u.port:!1},request:{naming:"snake",deep:0},response:{naming:"camel",deep:0},http:{headers:{"Content-Type":"application/json"}},routes:{getUserBase:{path:"/getuser",response:{resource:{user:""},computed:{fullAddress:function(){return s(this.default_address)}}}},setUserBase:{method:"POST",path:"/editbase",removeCache:"getUserBase",request:{resource:{user:""}}},getUserAuth:{path:"/settingstatus",response:{alias:{edit_user_name:"leftDays",set_password:"hasPassword",oauth_status:"vendor"}}},getUserVendors:{path:"/getthird",query:{type:{alias:"gettype",value:"2"}},response:{alias:{"[].isbind":"isBind"},map:function(e){return e.reduce(function(e,t){return"sina"===t.key&&(t.key="weibo"),e[t.key]=t,e},{})}}},getAddressList:{method:"GET",path:"/addresses",response:{alias:{"[].addressid":"addressId"},computed:{"[].fullAddress":function(){return s(this)}}}},getAddress:{method:"GET",path:"/address",query:"addressid=:id",response:{alias:{addressid:"addressId"}}},getAreas:{path:"/area",query:"id="},removeAddress:{method:"DELETE",path:"/address",removeCache:["getAddressList","getUserBase"]},setAddress:{method:"POST",path:"/address",removeCache:["getAddressList","getAddress","getUserBase"],request:{alias:{addressId:"addressid"}}},sms:{method:"POST",path:"/sendmsg",data:"mobile=&imgcode=:captcha&token=&gettype=:type",request:{map:r({reset:0,update:1,unbind:2,bind:3,active:3})}},mobile:{method:"POST",path:"/mobile",removeCache:["getUserBase","getUserAuth"],data:"gettype=:type&msgcode=:sms&mobile=",request:{map:r({update:0,unbind:1,bind:2,active:2})}},resetMobile:{method:"POST",path:"/resetstep1",removeCache:["getUserBase","getUserAuth"],data:"msgcode=:sms&mobile="},password:{method:"POST",path:"/resetstep2",data:"gettype=:type&password=&newpassword",removeCache:["getUserBase","getUserAuth"],request:{map:r({bind:0,update:1,reset:2})}},email:{method:"POST",path:"/sendmail",removeCache:["getUserBase","getUserAuth"],data:"gettype=:type&email=",request:{map:r({verify:0,bind:1,reset:2})}},unbindEmail:{method:"DELETE",path:"/email",removeCache:["getUserBase","getUserAuth"],data:"email="},verifyOldMobile:{method:"POST",path:"/validatemobile",data:"mobile="}},resources:{user:{username:"user_name",nickname:"nick",birthday:null,bio:"signature",gender:{defaultValue:-1}}},mocks:l}}},function(e,t){e.exports={name:"account-setting",version:"1.0.0-alpha",description:"账号设置移动版",main:"pwebrc.js",scripts:{modernizr:"modernizr -c modernizr-config.json -d node_modules/modernizr/modernizr.js",clear:"rm -rf dist/*",lint:"cs -f --jshint --jscs --eslint *.js tools/** src/scripts/**/*.jsx","lint-sass":"cs --sass src/styles/ -e src/styles/_reference.sass",dev:"npm run clear && NODE_ENV=dev pweb -s -w","dev-memory":"npm run clear && NODE_ENV=memory pweb -s -w","dev-mock":"npm run clear && NODE_ENV=mock pweb -s -w","dev-mock-server":"babel-node tools/mock-server.jsx --presets es2015 stage-0",release:"npm run clear && pweb -p && dar --spa=index.html","release-memory":"npm run clear && NODE_ENV=memory pweb -p && da -u qiniu dist/index.html && node tools/push-to-sinaapp.js",qa:"npm run push-to-qa && rm -rf downloads* && dad && zip -r downloads.zip downloads/ -x downloads/**/*.html && da downloads.zip -u dev --no-map","push-to-dev":"node tools/push.js dev","push-to-qa":"node tools/push.js qa"},env:{mock:{host:"0.0.0.0",port:3e3}},repository:{type:"git",url:"git@gitlab.yeshj.com:web-rd-projects/account-setting.git"},author:"",license:"ISC",dependencies:{"elegant-api":"0.0.3","es6-promise":"^3.1.2",fastclick:"^1.0.6","blueimp-md5":"^2.3.0",modernizr:"^3.3.1","naming-transform":"0.0.6",vue:"^1.0.8","vue-resource":"^0.1.17","vue-router":"^0.7.12"},devDependencies:{"babel-cli":"^6.6.5","babel-preset-es2015":"^6.6.0","babel-preset-stage-0":"^6.5.0","check-style":"3.0.3","cz-conventional-changelog":"^1.1.5","deploy-asset-release":"0.0.4",ghooks:"^1.0.3",jsonplus:"^1.2.1",lac:"0.0.5",request:"^2.69.0","validate-commit-msg":"^2.3.1"},config:{commitizen:{path:"./node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npm run lint","commit-msg":"./node_modules/validate-commit-msg/index.js"}}}},function(e,t,n){function a(e){return n(r(e))}function r(e){return s[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var s={"./$default.js":28,"./getAddressList.js":30,"./getAreas.js":31,"./getUserAuth.js":32,"./getUserBase.js":33,"./getUserVendors.js":34};a.keys=function(){return Object.keys(s)},a.resolve=r,e.exports=a,a.id=27},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return{status:0,message:"OK",data:e}}function s(e,t){return e+Math.floor(Math.random()*(t-e+1))}var i=function(){function e(e,t){var n=[],a=!0,r=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(u){r=!0,s=u}finally{try{!a&&o["return"]&&o["return"]()}finally{if(r)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(29),u=a(o);e.exports=function(e,t){this.$objectify=function(t){var n=this;return"function"!=typeof this[t]?this[t]:new Promise(function(a,r){n[t](e,function(e,s){return e?r(e):(n[t]=s,void a(s))})})},this.$objectifyAll=function(e){var t=this;return Promise.all([].concat(e).map(function(e){return t.$objectify(e)}))},this.$fetch=function(t,n){var a=this;n&&n.body&&(n.data=n.body,delete n.body);var r=u.extend({},e,n);return new Promise(function(e,n){a[t](r,function(t,a){t?n(t):e(a)})})},this.$fetchAll=function(e){var t=this;return Promise.all(Object.keys(e).map(function(n){return t.$fetch(n,e[n])}))};var n=e.data,a=e.query,o=e.ea,l={status:0,message:"OK",data:null};return o.error?t(null,{status:parseInt(o.error,10)||s(1e3,9999),message:""}):void this.$objectifyAll(["getAddressList","getUserBase","getUserAuth","getUserVendors"]).then(function(o){var d=i(o,2),c=d[0].data,f=d[1].data,p=void 0,v=function(e){return c.reduce(function(t,n){return n.addressid-e===0&&(t=n),t},null)};switch(e.mock.name){case"setAddress":p=parseInt(n.addressid,0),["province 省","city 市","area 区"].forEach(function(e){var t=e.split(" "),a=i(t,2),r=a[0],s=a[1];n[r+"_name"]=n[r]+s}),0===p?(n.addressid=s(10,1e5),c.push(n)):u.extend(v(p),n),t(null,l);break;case"removeAddress":o[0].data=c.filter(function(e){return n.addressids.indexOf(e.addressid)<0}),t(null,l);break;case"getAddress":p=parseInt(a.addressid,0),t(null,r(v(p)));break;case"setUserBase":Object.keys(n).forEach(function(e){-1!==n[e]&&null!=n[e]&&(f[e]=n[e])}),t(null,l);break;default:t(null,l)}})}},function(e,t){"use strict";function n(){}function a(e){return e?Object.keys(e):[]}function r(e){return Object.prototype.toString.call(e)}function s(e){return"[object Object]"===r(e)}function i(e){return Array.isArray(e)}function o(e){return s(e)?e:{}}function u(e,t){if(i(e))for(var n=0;n<e.length;n++)t(e[n],n,e);else s(e)&&a(e).forEach(function(n){return t(e[n],n,e)})}function l(e,t){return a(e).reduce(function(n,a){return n[a]=t(e[a],a,e),n},{})}function d(e,t){return[].concat(t).reduce(function(t,n){return t[n]=e[n],t},{})}function c(e,t){return t=[].concat(t),Object.keys(e).reduce(function(n,a){return t.indexOf(a)<0&&(n[a]=e[a]),n},{})}function f(e,t){var n=void 0;if(s(e))n={};else{if(!Array.isArray(e))return e;n=[]}return u(e,function(e,a){return n[a]=t?f(e,t):e}),n}function p(){var e=!1,t=[].slice.call(arguments);"boolean"==typeof t[0]&&(e=t.shift());for(var n=t.shift()||{},a=void 0,o=0;o<t.length;o++)a=t[o],(s(a)||i(a))&&(r(n)!==r(a)?n=deepClone(a):u(a,function(t,a){e&&(s(t)||i(t))?n[a]=p(e,n[a],t):n[a]=t}));return n}Object.defineProperty(t,"__esModule",{value:!0}),t.emptyFunction=n,t.objectKeys=a,t.toString=r,t.isObject=s,t.isArray=i,t.objectify=o,t.each=u,t.mapObject=l,t.pick=d,t.omit=c,t.clone=f,t.extend=p},function(e,t){"use strict";e.exports=function(e,t){function n(e){return Object.keys(e).reduce(function(t,n){return t[n]=e[n],t},{})}function a(e,t){return e+Math.floor(Math.random()*(t-e+1))}function r(e){var t=["省","市","区"];["province","city","area"].reduce(function(n,r,s){var i=a(1,9);return e[r]=(s+1).toString()+n.toString()+i.toString(),e[r+"_name"]=e[r]+t[s],i},0)}var s={addressid:1,is_default:!1,name:"user ",mobile:"13608800881",zipcode:"123456",city:"101",city_name:"101省",province:"212",province_name:"212市",area:"323",area_name:"323区",address:"abc路123号567幢",addTime:"2016-03-08T11:09:58.62"},i={status:0,message:"OK",data:[]},o=e.ea,u=void 0,l=void 0,d="is_default";for(u=1;5>=u;u++)l=n(s),l.addressid=u,l.name=l.name+u,l.zipcode=a(1e5,999999).toString(),l.mobile=l.mobile.substr(0,6)+a(1e4,99999),l.address=Math.random().toString(16).slice(-4).toUpperCase()+"路"+a(100,1e3)+"号"+a(1,100)+"幢",r(l),l[d]=1===u,i.data.push(l);"empty"===o.user?i.data.length=0:"full"!==o.user&&(i.data.length=3),t(null,i)}},function(e,t){"use strict";function n(e,t){for(var n=["省","市","区"],a=[],r=void 0,s=0;10>s;s++)r=(e+1).toString()+t.toString()+s,a.push({id:r,level:e,area_name:r+n[e]});return a}e.exports=function(e,t){var a=e.query;0===parseInt(a.id,10)&&(a.id="000");var r=parseInt(a.id[0],10),s=parseInt(a.id[2],10);t(null,{status:0,message:"OK",data:n(r,s)})}},function(e,t){"use strict";e.exports=function(e,t){var n={status:0,message:"OK",data:{edit_user_name:0,active:!0,email_status:2,set_password:!1,oauth_status:{qq:!1,weixin:!0,sina:!1}}},a=e.ea;"empty"===a.user?n.data={edit_user_name:0,active:!1,email_status:0,set_password:!1,oauth_status:{qq:!1,weixin:!1,sina:!1}}:"full"===a.user&&(n.data={edit_user_name:100,active:!0,email_status:1,set_password:!0,oauth_status:{qq:!0,weixin:!0,sina:!0}}),t(null,n)}},function(e,t){"use strict";e.exports=function(e,t){var n={status:0,message:"OK",data:{user_id:123465,avatar:"https://i2n.hjfile.cn/u/avator/200/default.jpg?r=635846698396747511",user_name:"qinfeng1201",nick:"昵称",signature:"这里是签名",birthday:"2012-01-10",gender:1,mobile:"130****1234",email:"ff****ff@123.com",default_address:{}}},a={name:"0023aabc",mobile:"13608800881",zipcode:"123456",province:"13",province_name:"福建省",city:"252",city_name:"福州市",area:"1710",area_name:"鼓楼区",address:"abc路123号567幢abc路123号567幢abc路123号567幢",addTime:"2016-03-08T11:09:58.62"},r=e.ea;"empty"===r.user?n.data={user_id:123465,avatar:"",user_name:"Mora",nick:"",signature:"",birthday:"",gender:2,mobile:"",email:"",default_address:null}:"full"===r.user&&(n.data={user_id:123465,avatar:"https://i2n.hjfile.cn/u/avator/200/default.jpg?r=635846698396747511",user_name:"qinfeng1201",nick:"我是昵称我是昵称",signature:"我是一个长长长的签名",birthday:"2012-01-10",gender:0,mobile:"130****1234",email:"ff****ff@123.com",default_address:a}),t(null,n)}},function(e,t){"use strict";e.exports=function(e,t){var n=e.ea,a="empty"===n.user,r="full"===n.user,s=function(){return r?!0:a?!1:Math.round(100*Math.random())%2},i={status:0,message:"OK",data:[{key:"qq",isbind:s(),oauth_name:"我是qq第三方",login_url:"https://graph.qq.com/oauth2.0/authorize?response_type=code&client_id=100245607&display=&redirect_uri=https%3a%2f%2fpass.hujiang.com%2fsc%2f%3fconnect_type%3dqq&state="},{key:"sina",isbind:s(),oauth_name:"我是weibo第三方",login_url:"https://graph.qq.com/oauth2.0/authorize?response_type=code&client_id=100245607&display=&redirect_uri=https%3a%2f%2fpass.hujiang.com%2fsc%2f%3fconnect_type%3dqq&state="},{key:"weixin",isbind:s(),oauth_name:"我是weixin第三方",login_url:"https://graph.qq.com/oauth2.0/authorize?response_type=code&client_id=100245607&display=&redirect_uri=https%3a%2f%2fpass.hujiang.com%2fsc%2f%3fconnect_type%3dqq&state="}]};t(null,i)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n=document.createElement("div");return n.className=e,t&&(n.innerHTML=t),document.body.appendChild(n),n}function s(e){e.preventDefault()}function i(){document.addEventListener("touchmove",s,!1)}function o(){document.removeEventListener("touchmove",s,!1)}function u(e){i(),g.className="dialog "+(e||""),g.style.display="block",y.style.display="block",b["default"](g,"fadein")}function l(e,t){o(),g.style.display="none",y.style.display="none",e.preventDefault(),x&&x(t)}function d(e){l(e,!1)}function c(e){l(e,!0)}function f(e){l(e,null)}function p(e,t,n,a){if("object"==typeof n){var r=[a,n];n=r[0],a=r[1]}"object"!=typeof a&&(a={}),"function"!=typeof n&&(n=a.callback||null),x=n,_.textContent=t,a.ok=a.ok||"alert"!==e?a.ok||"确认":"知道了",a.ok&&(w.textContent=a.ok),a.cancel&&(k.textContent=a.cancel),k.style.display="alert"===e?"none":"",u("dialog-"+e)}function v(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];p("confirm",e,t,n)}function h(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];p("alert",e,t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.confirm=v,t.alert=h;var m=n(36),b=a(m),y=document.querySelector(".dialog-mask")||r("dialog-mask"),g=document.querySelector(".dialog")||r("dialog",'<div class="dialog-body"><div class="content"></div></div><div class="dialog-foot"><div class="controls"><a class="control control-cancel">取消</a><a class="control control-ok">确认</a></div></div>'),w=g.querySelector(".control-ok"),k=g.querySelector(".control-cancel"),_=g.querySelector(".content"),x=void 0;y.addEventListener("click",f,!1),w.addEventListener("click",c,!1),k.addEventListener("click",d,!1)},function(e,t){"use strict";function n(e){setTimeout(e,0)}Object.defineProperty(t,"__esModule",{value:!0});var a=window.ontransitionend||window.onwebkittransitionend,r=window.ontransitionend?"transitionend":"webkitTransitionEnd";t["default"]=function(e,t,s){var i=function(){return s&&s()};if(!a)return i();var o=e.classList,u=function(){o.remove(t+"-active"),o.remove(t+"-transition"),i()};o.add(t+"-active"),n(function(){e.addEventListener(r,u,!1),o.add(t+"-transition")})},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t["default"]={set:function(e,t){return n[e]=t,t},get:function(e){return n[e]},del:function(e){var t=n[e];return delete n[e],t},empty:function(){var e=n;return n={},e}},e.exports=t["default"]},function(e,t){"use strict";function n(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function a(e){return null==e||""===e}function r(e){return e.replace(c,"__").length}function s(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?1/0:arguments[2],a=r(e);return this.minlength=a>=t,this.maxlength=n>=a,this.minlength&&this.maxlength}function i(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r={},s=void 0,i=void 0;if(t=[].concat(t),t.indexOf("required")<0&&a(e))s=!0;else{var o=void 0,u=void 0,l=void 0;for(u=0;u<t.length&&(i=t[u],o=i.split("."),l=2===o.length?g[o[0]][o[1]]:g[i],s=l.call(r,e),!(s===!1||"string"==typeof s||s&&s.passed===!1));u++);}return s===!0||null==s?r.passed=!0:s===!1?(r.passed=!1,s=n.error||"{field}验证失败"):"string"==typeof s?r.passed=!1:"passed"in r||(r.passed=!0),r.passed?(r.value=e,r.message=""):(r.rule=i,r.message=s.replace(/\{(\w+)\}/g,function(e,t){return t in n?n[t]:""})),r}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var o=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,u=/^1[34578]\d{9}$/,l=/^\d+$/,d=/^\d{6}$/,c=/[\u4E00-\uFA29]/g,f=/^(?![0-9]+$)(?![a-zA-Z]+$).*$/,p=/\d/,v=/[a-zA-Z]/,h=/[^0-9a-zA-Z]/,m=/^[^_\d].*/,b=/^[a-zA-Z\u4E00-\uFA29][_a-zA-Z\d\u4E00-\uFA29]+$/,y="abc123|a1b2c3|aaa111|123qwe|p@ssword|passw0rd|trustno1".split("|"),g={required:function(e){return a(e)||0===n(e).length?"{field}不能为空":void 0},nickname:function(e){return s.call(this,e,1,20)?void 0:this.maxlength?"昵称过短":"昵称过长"},bio:function(e){return s.call(this,e,1,20)?void 0:this.maxlength?"签名过短":"签名过长"},username:function(e){return m.test(e)?b.test(e)?s.call(this,e,4,20)?void 0:this.maxlength?"用户名过短":"用户名过长":"用户名不能含特殊符号的字符":"用户名不能以下划线或数字开头"},mobile:function(e){return u.test(e)?void 0:"手机号码不合法"},email:function(e){return o.test(e)?void 0:"邮件格式不合法"},sms:function(e){return d?void 0:"短信码格式不正确"},password:function(e){if(!f.test(e))return"密码不能使用纯数字或纯字母";if(!s.call(this,e,8,20))return this.maxlength?"密码过短":"密码过长";var t=0;y.indexOf(e)>=0?t=1:(p.test(e)&&t++,v.test(e)&&t++,h.test(e)&&t++),this.strength=t},addr:{name:function(e){return s.call(this,e,4,20)?void 0:this.maxlength?"用户名过短":"用户名过长"},zipcode:function(e){return l.test(e)?s.call(this,e,3,10)?void 0:this.maxlength?"邮政编码过短":"邮政编码过长":"邮政编码格式错误"},mobile:function(e){return l.test(e)?s.call(this,e,5,20)?void 0:this.maxlength?"手机号码过短":"手机号码过长":"手机号码格式错误"},address:function(e){return s.call(this,e,5,60)?void 0:this.maxlength?"详细地址过短":"详细地址过长"}}};i.rules=g,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);t["default"]=function(){for(var e=this,t=[],n=arguments.length,s=Array(n),i=0;n>i;i++)s[i]=arguments[i];return s.forEach(function(n){n&&(Array.isArray(n)?t.push(e.classSet.apply(e,a(n))):"string"==typeof n?t.push.apply(t,a(n.split(/\s+/))):"object"==typeof n&&t.push.apply(t,a(Object.keys(n).filter(function(e){return n[e]}))))}),t.map(r.kebab).join(" ")},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={data:function(){return{isAsync:!1}},methods:{async:function(){var e=this;return this.isAsync=!0,function(){e.isAsync=!1}}}},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={data:function(){return{xhrError:""}},beforeDestroy:function(){this._unwatch&&this._unwatch()},methods:{setTimeoutError:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?4e3:arguments[1],a=arguments.length<=2||void 0===arguments[2]?"error":arguments[2];if(e&&"string"==typeof this[a]){var r=a+"_timeoutId";this[a]=e,clearTimeout(r),this[r]=setTimeout(function(){t[a]===e&&(t[a]="")},n)}},submit:function(){var e=this;if(!this._unwatch&&this.watch&&(this._unwatch=this.watch(),"function"!=typeof this._unwatch&&console.warn("`watch` function should return unwatch function in %o",this)),this.validate&&!this.validate())return!1;if("disabledSubmit"in this&&this.disabledSubmit)return!1;if("function"!=typeof this.save)return console.warn("You need define `save` method in %o",this);var t=this.async(),n=this.save();return n["catch"]&&n["finally"]?void n["catch"](function(t){2114===t.status||2111===t.status?e.$router.gotoResult("operate"):(e.setTimeoutError(t.message,4e3,"xhrError"),"string"==typeof e.error&&e.setTimeoutError(t.message))})["finally"](t):console.warn("%o `save` method should return promise",this)}}},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n='<div class="nav-bar" :style="rootStyle">\n  <div class="nav-bar-center">\n    <h1 class="title"><slot></slot></h1>\n  </div>\n  <div class="nav-bar-side pull-left">\n    <a class="text-hide back link" @click="back">返回</a>\n  </div>\n  <div class="nav-bar-side pull-right"><slot name="right"></slot></div>\n  <div class="nav-active-banner" v-if="showActive">\n    <p class="gap">\n      账号未激活，激活后才能评论和购课哦～\n      <a v-link="{name: \'switcher\', params: {type: \'active\'}}">去激活 &gt;</a>\n    </p>\n  </div>\n</div>';t["default"]={name:"NavBar",template:n,props:{onBack:Function,showActive:Boolean},computed:{rootStyle:function(){var e={};return e}},methods:{back:function(){this.onBack&&this.onBack()===!1||history.back()}}},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n='<div class="field" :class="className">\n\n  <div class="flex-container">\n    <label class="field-label" :for="labelId">{{label}}</label>\n    <div class="field-control-wrap" flex="1">\n      <input :id="labelId" :type="type" :placeholder="placeholder" class="field-control"\n        v-model="value"\n        v-el:control\n        autocomplete="off"\n        autocapitalize="none"\n        autocorrect="off"\n        spellcheck="false">\n      <a v-show="value && showClear" @click="clear" class="field-clear text-hide">清除</a>\n    </div>\n    <div class="field-extra"><slot name="extra"></slot></div>\n  </div>\n</div>',a=0;t["default"]={name:"Field",template:n,props:{className:String,showClear:Boolean,value:{validator:function(e){return null==e||"string"==typeof e},twoWay:!0},type:{type:String,"default":"text"},label:String,placeholder:String},methods:{clear:function(){this.value="",this.$els.control.focus()}},created:function(){this.labelId="_label-"+ ++a}},e.exports=t["default"]},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var a='<div :class="rowClassName">\n  <div class="row-wrap">\n    <div class="row-label">\n      <span class="label">{{* label }}</span>\n    </div>\n\n    <div v-if="type === \'avatar\'" class="row-value">\n      <img class="avatar" :src="value" />\n    </div>\n\n    <div v-if="type === \'logo\'" class="row-value">\n      <span class="logo" :class="\'logo-\' + value" v-if="hasValue"></span>\n      <span line-clamp="1" class="default-value" v-else>{{ defaultValue }}</span>\n      <p class="notice" v-if="notice">{{* notice }}</p>\n    </div>\n\n    <div v-if="type === \'simple\' || type === \'double\'" class="row-value">\n      <span line-clamp="1" class="value" v-if="hasValue">{{ value }}</span>\n      <span line-clamp="1" class="default-value" v-else>{{ defaultValue || \'\' }}</span>\n      <p class="notice" v-if="type === \'simple\' && notice">{{* notice }}</p>\n    </div>\n\n    <div class="row-extra"><slot name="extra"></slot></div>\n  </div>\n</div>';t["default"]={name:"Row",template:a,props:{type:{type:String,"default":"simple"},label:String,value:{},defaultValue:String,noValue:Boolean,notice:String,className:String,editable:{type:Boolean,"default":!0},isLoading:Boolean},computed:{hasValue:function(){return null!=this.value&&""!==this.value},rowClassName:function(){var e,t=(e={},n(e,"row-type-"+this.type,!0),n(e,"editable",this.editable),n(e,"isLoading",this.isLoading),n(e,"noValue",this.noValue),n(e,"hasNotice",this.notice),e);return this.$classSet(t,this.className,"row")}}},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n='<div class="address-list-item"\n  :class="{\'is-default\': data.isDefault, \'is-edit\': isEdit, \'is-checked\': isEdit && checked}">\n\n  <p class="_top">\n    <span class="_username">{{data.name}}</span>\n    <span class="_mobile">{{data.mobile}}</span>\n  </p>\n\n  <p class="_bottom _address break-word" line-clamp="2">\n    {{(data.isDefault ? \'[默认] \' : \'\') + data.fullAddress}}\n  </p>\n</div>';t["default"]={name:"AddressListItem",template:n,props:{data:Object,isEdit:Boolean,checked:Boolean
}},e.exports=t["default"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(36),s=a(r),i=n(35);t["default"]={bind:function(){var e=this,t=this.vm,n=t.$options.loading,a=!1,r=void 0,o=void 0,u=void 0,l=void 0,d=this.el.classList;return"function"!=typeof n?(console.warn("No loading function for your view model %o",t),!1):(u=function(){t.isLoading=!0,d.add("loading")},l=function(){d.remove("loading"),s["default"](e.el,"loaded",function(){return d.add("loaded")})},r=function(){a||(a=!0,t.isLoading=!1,l())},u(),o=n.call(t,r),void(o&&o["finally"]&&o["catch"](function(e){return i.alert(e.message)})["finally"](r)))}},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={bind:function(){var e=this.el,t=e.innerHTML;e.innerHTML='<div class="ladda-wrap">\n      <span class="ladda-label">'+t+'</span><span class="ladda-spinner"></span>\n    </div>'},update:function(e){this.el.classList[e?"add":"remove"]("ladda-btn")}},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return e.replace(/^(.{2}).*(.{2}@)/,"$1****$2")},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return"http://mail."+e.split("@").pop()},e.exports=t["default"]}]);
