webpackJsonp([2],[function(e,t,n){"use strict";n(71);var r=n(28),a=n(14),o=n(64),s=a.browserHistory;r.render(r.React.createElement(a.Router,{routes:o.routes,history:s}),document.querySelector("main"))},,,,function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}r(n(28)),r(n(48)),r(n(49)),r(n(60)),r(n(50)),r(n(62)),r(n(63)),r(n(61))},,,function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}r(n(16))},,,,function(e,t,n){"use strict";function r(e){c.MessageFactory.registerComponent(e.type,e)}var a=function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(7),s=n(4),i=n(14),c=n(15),u=n(74),p=function(e){function t(){e.apply(this,arguments)}return a(t,e),t.prototype.renderCommunityUser=function(e,t,n){return s.React.createElement("div",{className:n.user},s.React.createElement("div",{className:n.avatar},s.React.createElement("img",{className:n.avatarImg,src:e.avatar})),s.React.createElement("div",{className:n.detail},s.React.createElement("h3",{className:n.username},e.name),s.React.createElement("span",{className:n.pubtime},t)))},t.prototype.renderExternal=function(){var e=this.props,t=e.message,n=e.business,r=e.category,a=e.unread,c=o.Business[t.business],p=o.BusinessMap[c];if(c===n||!a||!a[c])return null;if(1===a[c])return s.React.createElement("p",{className:u.from},"来自",p);var l="/"+n+"/"+r+"/"+c;return s.React.createElement(i.Link,{className:u.external,to:l},p,"还有",a[c],"条未读消息 >")},t}(s.Component);t.MessageRender=p,t.register=r},,,,function(e,t){"use strict";var n={},r=function(){function e(){}return e.registerComponent=function(e,t){n[e]=t},e.getComponent=function(e){return n[e]},e}();t.MessageFactory=r},function(e,t){"use strict";function n(e){return Object.keys(e).filter(function(e){return!a.test(e)})}function r(e){return Object.keys(e).filter(function(e){return a.test(e)}).map(function(e){return parseInt(e,10)})}var a=/^\d+$/;!function(e){e[e.notice=1]="notice",e[e.community=2]="community",e[e.subscribe=3]="subscribe"}(t.Category||(t.Category={}));t.Category;t.CategoryMap={notice:"通知",community:"社交",subscribe:"订阅"},t.CategoryKeys=["notice","community","subscribe"],t.defaultCategoryKey=t.CategoryKeys[0],function(e){e[e.cctalk=1]="cctalk",e[e.hujiang=2]="hujiang",e[e.league=3]="league",e[e.hjclass=4]="hjclass"}(t.Business||(t.Business={}));var o=t.Business;t.BusinessMap={cctalk:"CCTalk",hujiang:"沪江学习",league:"沪江词场",hjclass:"沪江网校"},t.BusinessKeys=n(o),t.defaultBusinessKey=t.BusinessKeys[0],function(e){e[e.System=1]="System",e[e.Reply=2]="Reply",e[e.Fans=3]="Fans",e[e.Course=4]="Course",e[e.Magazine=5]="Magazine"}(t.Type||(t.Type={}));t.Type;t.enumKeys=n,t.enumValues=r},,,,,,,,,,function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}var a=n(15),o=n(46);o.keys().forEach(function(e){if(/(\w+)\.tsx/.test(e)){var t=RegExp.$1,n=o(e)[t];a.MessageFactory.registerComponent(n.type,n)}}),r(n(15)),r(n(51)),r(n(11))},function(e,t,n){"use strict";var r=function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(4),o=function(e){function t(t){e.call(this,t);t.params;this.state=this.getInitState()}return r(t,e),t.createInitState=function(){return{messages:[],page:0,pageSize:10,hideLoading:!1}},t.prototype.getInitState=function(){return this.getConstructor().initState||t.createInitState()},t.prototype.componentDidMount=function(){this._isMounted=!0},t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),this._isMounted=!1},t}(a.Component);t.MessageGroup=o},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(2);t.React=o;var s=n(38);t.render=s.render,t.findDOMNode=s.findDOMNode;var i="undefined"!=typeof window,c=function(e){function t(t){e.call(this,t),this.isClient=i,this.isServer=!i;var n={};this.state=n}return a(t,e),t.prototype.getConstructor=function(){return this.constructor},t.prototype.componentWillUnmount=function(){this.state=null},t.prototype.classSet=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var a=[];return t.forEach(function(t){t&&(Array.isArray(t)?a.push(e.classSet.apply(e,t)):"string"==typeof t?a.push(t):"object"===("undefined"==typeof t?"undefined":r(t))&&a.push.apply(a,Object.keys(t).filter(function(e){return t[e]})))}),a.join(" ")},t}(o.Component);t.Component=c},,function(e,t){e.exports={item:"_2B-f9hZJ",follows:"_2RZvCCkc",follow:"_1NdWkpm_",content:"WvLqlPY4",grayBackground:"Wdx77iE2",title:"_2HeKYZEe",time:"_2qoCqGt2",user:"_1awaliRa",avatar:"_1TuoDfl3",avatarImg:"_2uGIXoAc",detail:"BVDdfqVb",username:"_3VrkeQKK",pubtime:"_3niHB7o3"}},function(e,t){e.exports={item:"_3i0McZiX",cover:"_2UMXibsD",body:"_3QZU8LU4",link:"_32Wjc51I",title:"_1frtJDd9",time:"_3By44e0d",content:"rBo7kFC4"}},function(e,t){e.exports={list:"P3ahEF5S",mixedList:"_3ywn3JAC",simpleList:"_1_g3vGe1",download:"_32GZt2RY"}},,,,,,,,,,,,,,function(e,t,n){function r(e){return n(a(e))}function a(e){return o[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var o={"./CourseMessageRender.tsx":52,"./FansMessageRender.tsx":53,"./MagazineMessageRender.tsx":54,"./ReplyMessageRender.tsx":55,"./SystemMessageRender.tsx":56};r.keys=function(){return Object.keys(o)},r.resolve=a,e.exports=r,r.id=46},,function(e,t,n){"use strict";var r=function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(4),o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.getChildContext=function(){return{title:"消息中心"}},t.prototype.render=function(){return this.props.children},t.childContextTypes={title:a.React.PropTypes.string},t}(a.Component);t.App=o},function(e,t,n){"use strict";var r=function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(4),o=n(14),s=n(72),i=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.back=function(){o.browserHistory.goBack()},t.prototype.componentDidMount=function(){var e=this,t=e.props,n=e.isClient;n&&document.title!==t.title&&(document.title=t.title)},t.prototype.render=function(){return a.React.createElement("div",{className:this.classSet("no-select",s.header)},a.React.createElement("a",{className:this.classSet("icon-carat-w text-hide",s.back),onClick:this.back.bind(this)},"Back"),a.React.createElement("div",{className:this.classSet(s.title)},this.props.title))},t}(a.Component);t.Header=i},function(e,t,n){"use strict";var r=function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(4),o=n(73),s=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.componentDidMount=function(){var e=this;this._isMounded=!0;var t=this.props.load,n=a.findDOMNode(this.refs.el);if(t&&n&&!this.isServer){var r,o,s,i=window.innerHeight;s=function(t){return void 0===t&&(t=!1),r=!1,e._isMounded?void(t?e.setState({finished:t}):o()):e.unhandle()},o=function(){if(e._isMounded&&!r&&!e.state.finished){var a=n.getBoundingClientRect(),o=a.top,c=a.bottom;(i>=o||i>=c)&&(r=!0,t(s))}},o(),this.handle(o)}},t.prototype.reload=function(){var e=this;this.setState({finished:!1},function(){e.componentDidMount()})},t.prototype.handle=function(e){this._handler!==e&&(this.unhandle(),this._handler=e,window.addEventListener("scroll",e),window.addEventListener("resize",e))},t.prototype.unhandle=function(){this._handler&&(this._handler=null,window.removeEventListener("resize",this._handler),window.removeEventListener("scroll",this._handler))},t.prototype.componentWillUnmount=function(){this.unhandle(),e.prototype.componentWillUnmount.call(this),this._isMounded=!1},t.prototype.render=function(){var e=this.props,t=e.hide,n=e.message,r=this.state.finished;return t?a.React.createElement("div",null):a.React.createElement("div",{ref:"el",className:this.classSet("no-select",o.loading,r&&o.finished)},r?n||"没有更多了":a.React.createElement("i",{className:"icon-spin5 spin "+o.spin}))},t}(a.Component);t.Loading=s},function(e,t,n){"use strict";var r=function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(4),o=n(15),s=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.render=function(){var e=this.props.message,t=o.MessageFactory.getComponent(e.type);return t?a.React.createElement(t,this.props):(console.error("Not found component for %o",e),null)},t}(a.Component);t.MessageBuilder=s},function(e,t,n){"use strict";var r=function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(4),o=n(7),s=n(11),i=n(31),c=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.render=function(){var e=this.props.message;return a.React.createElement("div",{className:this.classSet(i.item,"flex")},a.React.createElement("div",{className:i.cover},a.React.createElement("img",{className:i.cover,src:e.cover})),a.React.createElement("div",{className:i.body,"data-flex":"1"},a.React.createElement("a",{href:e.link,className:i.link},a.React.createElement("h3",{"data-clamp":"2",className:i.title},e.title),a.React.createElement("div",{className:"clearfix"},a.React.createElement("span",{className:"pull-left "+i.time},a.humanTime(e.createTime))),a.React.createElement("p",{"data-clamp":"2",className:i.content},e.content)),this.renderExternal()))},t.type=o.Type.Course,t}(s.MessageRender);t.CourseMessageRender=c},function(e,t,n){"use strict";var r=function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(4),o=n(7),s=n(11),i=n(30),c=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.render=function(){var e=this.props.message,t=e.fans,n=t.length,r=t[0].name,o="“"+r+"”"+(1===n?"":"等"+n+"人")+"成为了你的粉丝";return a.React.createElement("div",{className:i.item},a.React.createElement("div",{className:i.follows+" text-ellipsis"},t.map(function(e,t){return a.React.createElement("img",{className:i.follow,key:t,src:e.avatar})})),a.React.createElement("p",{className:i.content},o),a.React.createElement("span",{className:i.time},a.humanTime(e.createTime)),this.renderExternal())},t.type=o.Type.Fans,t}(s.MessageRender);t.FansMessageRender=c},function(e,t,n){"use strict";var r=function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(4),o=n(7),s=n(11),i=n(31),c=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.render=function(){var e=this.props.message;return a.React.createElement("div",{className:this.classSet(i.item,"flex")},a.React.createElement("div",{className:i.cover},a.React.createElement("img",{className:i.cover,src:e.cover})),a.React.createElement("div",{className:i.body,"data-flex":"1"},a.React.createElement("a",{href:e.link,className:i.link},a.React.createElement("h3",{"data-clamp":"2",className:i.title},e.title),a.React.createElement("div",{className:"clearfix"},a.React.createElement("span",{className:"pull-left "+i.time},a.humanTime(e.createTime)),a.React.createElement("span",{className:"pull-right "+i.time},"更新",e.series,"期"))),this.renderExternal()))},t.type=o.Type.Magazine,t}(s.MessageRender);t.MagazineMessageRender=c},function(e,t,n){"use strict";var r=function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(4),o=n(7),s=n(11),i=n(30),c=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.render=function(){var e=this.props.message;return a.React.createElement("div",{className:i.item},this.renderCommunityUser(e.from,a.humanTime(e.createTime),i),a.React.createElement("p",{"data-clamp":"2",className:i.content},e.answer),a.React.createElement("div",{className:i.grayBackground},a.React.createElement("p",{"data-clamp":"2",className:i.title},e.title)),this.renderExternal())},t.type=o.Type.Reply,t}(s.MessageRender);t.ReplyMessageRender=c},function(e,t,n){"use strict";var r=function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(4),o=n(7),s=n(11),i=n(75),c=function(e){function t(t){e.call(this,t),this.state.clamp="2"}return r(t,e),t.prototype.handleClick=function(){var e=this.state.clamp;this.setState({clamp:e?"":"2"})},t.prototype.render=function(){var e=this.props.message,t=this.state.clamp;return a.React.createElement("div",{className:i.item},a.React.createElement("p",{onClick:this.handleClick.bind(this),className:i.title,"data-clamp":t},e.title),a.React.createElement("span",{className:i.time},a.humanTime(e.createTime)),this.renderExternal())},t.type=o.Type.System,t}(s.MessageRender);t.SystemMessageRender=c},function(e,t,n){"use strict";var r=function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(4),o=n(26),s=n(27),i=n(4),c=n(32),u=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.isomorphic=function(e,n){var r=n||s.MessageGroup.createInitState(),o=r.page,i=r.pageSize,c=r.messages,u=r.hideLoading,p=e.params,l=p.business,f=p.category;return o++,a.api.getCagegoryMessages({business:l,category:f,page:o,pageSize:i}).then(function(e){var r=e.collection,o=e.page,s=e.total,p=e.unread;a.setServerTime(e.now),c.push.apply(c,r);var l=c.length;u=l&&i>l;var m=a.store.get("dots",{});Object.keys(p.category).forEach(function(e){e===f?m[e]=0:0!==m[e]&&(m[e]=p.category[e])}),a.store.set("dots",m);var d={page:o,messages:c,hideLoading:u,total:s,unread:p.business};return n||(t.initState=d),Promise.resolve(d)})},t.prototype.load=function(e){var t=this,n=this,r=n.props,a=n.state;this.getConstructor().isomorphic(r,a).then(function(n){t._isMounted&&(t.setState(n),e(n.messages.length>=n.total))})},t.prototype.getMessageList=function(){var e=this.state,t=e.messages,n=e.unread,r=this.props.params,s=r.business,i=r.category;return t.map(function(e){return a.React.createElement(o.MessageBuilder,{key:e.id,business:s,category:i,message:e,unread:n})})},t.prototype.componentWillReceiveProps=function(e){var t=this,n=s.MessageGroup.createInitState();this.setState(n,function(){t.refs.loading.reload()})},t.prototype.render=function(){var e=a.store.get("dots"),t=this,n=t.load,r=t.state,o=r.hideLoading,s=(r.unread,t.props.params.business);return a.React.createElement("div",null,a.React.createElement(i.Header,{title:this.context.title}),a.React.createElement(i.Nav,{business:s,dots:e}),a.React.createElement("div",{className:this.classSet(c.list,c.mixedList)},this.getMessageList()),a.React.createElement(i.Loading,{ref:"loading",hide:o,load:n.bind(this)}))},t.contextTypes={title:a.React.PropTypes.string},t}(s.MessageGroup);t.MixedMessageGroup=u},function(e,t,n){"use strict";var r=function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(4),o=n(7),s=n(26),i=n(27),c=n(32),u=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.isomorphic=function(e,n){var r=n||i.MessageGroup.createInitState(),o=r.page,s=r.pageSize,c=(r.messages,r.hideLoading,e.params),u=c.subBusiness,p=c.category;return o++,a.api.getBusinessUnreadMessages({category:p,business:u}).then(function(e){var r=e.collection,i=!!r.length,c=i&&e.total>r.length;a.setServerTime(e.now);var u={messages:r,hideLoading:i,showAppBanner:c,page:o,pageSize:s};return n||(t.initState=u),Promise.resolve(u)})},t.prototype.getMessageList=function(){return this.state.messages.map(function(e){return a.React.createElement(s.MessageBuilder,{key:e.id,message:e})})},t.prototype.load=function(e){var t=this,n=this,r=n.props,a=n.state;return a.page>0?e(!0):void this.getConstructor().isomorphic(r,a,e).then(function(n){t._isMounted&&(t.setState(n),e(!0))})},t.prototype.render=function(){var e=this,t=e.load,n=e.state,r=n.hideLoading,s=n.showAppBanner,i=this.props.params,u=i.category,p=i.subBusiness,l=o.BusinessMap[p],f=o.CategoryMap[u]+" - "+l;return a.React.createElement("div",null,a.React.createElement(a.Header,{title:f}),a.React.createElement("div",{className:this.classSet(c.list,c.simpleList)},this.getMessageList()),a.React.createElement(a.Loading,{hide:r,load:t.bind(this)}),s&&a.React.createElement("a",{className:c.download,href:"http://m.hujiang.com/app/"},"查看更多消息，请下载",l,"客户端 > "))},t}(i.MessageGroup);t.SimpleMessageGroup=u},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}r(n(57)),r(n(58))},function(e,t,n){"use strict";var r=function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(4),o=n(7),s=n(14),i=n(76),c=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.business,n=e.dots,r=void 0===n?{}:n,c=o.CategoryKeys.map(function(e){var n=o.CategoryMap[e],c="/"+t+"/"+e;return a.React.createElement("li",{"data-flex":"1",key:e,className:r[e]?i.dot:null},a.React.createElement(s.Link,{to:c,className:i.link,activeClassName:i.active},n))});return a.React.createElement("ul",{className:"flex "+i.nav},c)},t}(a.Component);t.Nav=c},function(e,t,n){"use strict";var r=n(29),a=n(66);t.api=r({base:"/api/messages",response:{order:[]},request:{order:[]},cache:{enable:"smart",expireSeconds:0},dataTransformMethod:"cookie",mock:{memory:!1,server:"self"},handle:function(e,t){var n=this.name;console.log("%c"+n+"%c "+e.http.url+" %o","color:green; background:yellow;","color:red",e);var r=function(e,t,n){var r,a,o=e||{},s=o.data,i=o.message,c=o.status;return t?(r="网络异常，请稍后再试",a=t,c=-1,console.log(a)):0!==c&&(r=i||"未知错误，状态码 "+c),r&&(t=new Error(r),t.status=c,t.message=r,t.oldError=a),n(t,s)},a=e.data,o=e.http,s=e.error,i=o.method;o.url;return delete o.crossOrigin,delete o.dataType,"HEAD"===i||"GET"===i?delete o.body:"POST"!==i&&"DELETE"!==i||(o.body=JSON.stringify(o.body)),this.mock.memory?r(a,s,t):void fetch(o.url,o).then(function(e){var t=e.status;if(t>=200&&300>t)return e.json();var n=new Error("STATUS NOT OK");throw n.response=e,n}).then(function(e){return r(e,null,t)}).catch(function(e){return r(null,e,t)})},routes:{getCagegoryMessages:{path:"/:category/:business",query:"page=1&pageSize=10"},getBusinessUnreadMessages:{path:"/group/:category/:business",query:"page=1&pageSize=10"},getMessage:{path:"/:id"}},mocks:a.mocks}),"undefined"!=typeof window&&!function(){var e=window;e.api=t.api,G&&G.eaCache&&t.api.$cache(G.eaCache)}();var o=n(16);t.Category=o.Category,t.Business=o.Business,t.Type=o.Type},function(e,t){"use strict";function n(e){null==o&&(o=e-Date.now())}function r(){return null==o&&console.warn("Not set server time yet, using client time temporarily!"),(o||0)+Date.now()}function a(e){var t,n,a,o=r();if(a=Math.floor((o-e)/6e4),1>a)return"刚刚";if(60>a)return a+"分钟前";if(1440>a)return Math.floor(a/60)+"小时前";if(14400>a)return Math.floor(a/1440)+"天前";t=new Date(e),n=new Date(o);var s=t.getFullYear(),i=t.getMonth()+1,c=t.getDate(),u=[i,c];return s!==n.getFullYear()&&u.unshift(s),u.join("-")}var o;t.setServerTime=n,t.getServerTime=r,t.humanTime=a},function(e,t){"use strict";var n={};t.store={get:function(e,t){return e in n?n[e]:t},set:function(e,t){n[e]=t},append:function(e,t){var n=this.get(e,[]);n.push.apply(n,t),this.set(e,n)}}},function(e,t,n){"use strict";function r(e){return e in c.BusinessMap?e:c.defaultBusinessKey}function a(e){return e in c.CategoryMap?e:c.defaultCategoryKey}function o(e){return{onEnter:function(t,n){var r=t.params,a=t.location,o=a.pathname,s=a.search,i=e(r);return i&&i!==o?n(i+s):!1}}}var s=n(4),i=n(59),c=n(7);t.routes={path:"/",component:s.App,indexRoute:o(function(e){return"/"+c.defaultBusinessKey+"/"+c.defaultCategoryKey}),childRoutes:[{path:"/:business",component:"",indexRoute:o(function(e){return"/"+r(e.business)+"/"+c.defaultCategoryKey})},{path:"/:business/:category",component:i.MixedMessageGroup,indexRoute:o(function(e){var t=e.business,n=e.category;return"/"+r(t)+"/"+a(n)})},{path:"/:business/:category/:subBusiness",component:i.SimpleMessageGroup,indexRoute:o(function(e){var t=e.business,n=e.category,o=e.subBusiness;return"/"+r(t)+"/"+a(n)+"/"+r(o)})}]}},function(e,t,n){"use strict";function r(e,t){return void 0===e&&(e=0),void 0===t&&(t=60),e+Math.floor(Math.random()*(t+1-e))}function a(e){var t=e;return Array.isArray(e)||(t=Object.keys(e).map(function(t){return e[t]})),t[r(0,t.length-1)]}function o(e){return a(f.enumValues(e))}function s(e){return a(f.enumKeys(e))}function i(e,t){void 0===e&&(e=1),void 0===t&&(t=120);var n=r(e,t);return l(n,function(){return a(y)}).join("")}function c(e){return"http://www.baidu.com?id="+e}function u(){return t.Generator.User()}function p(e){var n=t.Generator.Message();return e(n),n}function l(e,t,n){for(var r=[],a=0;e>a;a++)r.push(t.call(n));return r}var f=n(16),m="王李张刘陈杨赵黄周吴徐孙胡朱高林何郭马罗梁宋郑谢\n韩唐冯于董萧程曹袁邓许傅沈曾彭吕苏卢蒋蔡贾丁魏薛叶阎余潘杜戴夏锺汪田任姜范\n方石姚谭廖邹熊金陆郝孔白崔康毛邱秦江史顾侯邵孟龙万段雷钱汤尹黎易常武乔贺赖\n龚文".replace(/\s/g,"").split(""),d="伟芳娜秀英敏静丽强磊军洋勇艳杰娟涛明超秀兰霞平刚桂英".split(""),y="人类长期只有口语用文字记录口语形成的书面语历史很短系统的语言成为人和禽兽分离的重要工具文字".split(""),h="\nd8bad2c0f825c92e0415a5d46c3d2fbe1\nd8b2ba8cf572fba9f88e6f565e772714c\nddc6410213bd2a6d782e3feaf31d389f3\ndad84c291ff1f262000f96d36a8dd7ffc\nd4f8fce2c1195a53d3e688d8f6a6614ce\nd868f7175ff7f7e6c2e116988f6851f3b\ndfb05cc71c257a8038932208222e9f8d2\nd11258715ca4af94e73f28b6a6d51aac1\ndcbb8effef6f889c2aaf3a5712dfe401b\n".trim().split(/\s/).map(function(e){return"http://cdn.llsapp.com/"+e+".jpg"}),g=function(){return o(f.Category)},v=function(){return o(f.Business)},b=function(){return o(f.Type)},R=function(){return r(1,100)>50},M=function(){return a(h)},E=Date.now(),w=864e5,C=E-365*w,S=function(){return C+=Math.round((E-C)*Math.random())},N=1;t.Generator={sampleEnumKey:s,sampleEnumValue:o,now:E,oneDay:w,rand:r,sample:a,fill:l,category:g,business:v,type:b,Category:f.Category,Business:f.Business,Type:f.Type,User:function(){var e=a(d);return R()&&(e+=a(d)),{name:a(m)+e,avatar:M()}},Message:function(){var e=S(),t=N++,n=R();return{category:g(),business:v(),type:b(),createTime:e,id:t,isRead:n,readTime:n?Math.min(E,e+Math.round(Math.random()*w*10)):0}},SystemMessage:function(){return p(function(e){e.category=f.Category.notice,e.title=i(),e.type=f.Type.System})},ReplyMessage:function(){return p(function(e){e.category=f.Category.community,e.title=i(),e.answer=i(),e.link=c(e.id),e.from=u(),e.type=f.Type.Reply})},FansMessage:function(){return p(function(e){e.category=f.Category.community,e.fans=l(r(1,10),u),e.type=f.Type.Fans})},CourseMessage:function(){return p(function(e){e.category=f.Category.subscribe,e.title=i(),e.content=i(),e.link=c(e.id),e.type=f.Type.Course,e.cover=M()})},MagazineMessage:function(){return p(function(e){e.category=f.Category.subscribe,e.title=i(),e.link=c(e.id),e.series=r(100,9999),e.type=f.Type.Magazine,e.cover=M()})}}},function(e,t,n){"use strict";function r(e,t,n,r){var a=t[e[n]];r[a]||(r[a]=[]),r[a].push(e)}function a(e,t,n){var r={};return m.enumKeys(t).forEach(function(e){return r[e]=0}),n.forEach(function(n){n.isRead||r[t[n[e]]]++}),r}function o(e){return a("category",v,e)}function s(e){return a("business",g,e)}function i(e,t,n){return void 0===e&&(e=null),void 0===t&&(t=0),void 0===n&&(n=""),{data:e,status:t,message:n}}function c(e,t,n){var r=S[e],a=C[t],i={},c=r.filter(function(e){var n=e.business;return n in i?!1:(g[n]!==t&&(i[n]=!0),!0)}),p=u(c,n);return p.unread={business:s(r),category:o(a)},p}function u(e,t){var n=e.length,r=t.page,a=t.pageSize,o=Date.now();return r=parseInt(r,10)||1,a=parseInt(a,10)||10,e=e.slice((r-1)*a,r*a),{collection:e,total:n,page:r,pageSize:a,now:o}}function p(e,t){return e&&e in v?!0:(t(null,i(null,500,"category not exist or illegal")),!1)}function l(e,t){return e&&e in g?!0:(t(null,i(null,500,"business not exist or illegal")),!1)}function f(e,t,n){return p(e,n)&&l(t,n)}var m=n(16),d=n(65),y=(d.Generator.sample,d.Generator.fill,d.Generator.sampleEnumKey),h=d.Generator.Type,g=d.Generator.Business,v=d.Generator.Category,b=d.Generator.now,R=d.Generator.oneDay,M=1e3,E=500,w=d.Generator.fill(M,function(){return d.Generator[y(h)+"Message"]()}).map(function(e,t){return E>t?(e.isRead=!0,e.readTime=Math.min(b,e.createTime+Math.round(Math.random()*R*10))):(e.isRead=!1,e.readTime=0),e}).reverse(),C={},S={};w.forEach(function(e){r(e,g,"business",C),r(e,v,"category",S)}),t.mocks={getCagegoryMessages:function(e,t){var n=e.query,r=e.params,a=r.category,o=r.business;f(a,o,t)&&t(null,i(c(a,o,n)))},getBusinessUnreadMessages:function(e,t){var n=e.query,r=e.params,a=r.business,o=r.category;if(f(o,a,t)){var s=S[o].filter(function(e){return!e.isRead&&g[e.business]===a});t(null,i(u(s,n)))}},getMessage:function(e,t){var n,r=parseInt(e.params.id);r&&w.forEach(function(e){return e.id===r?(n=!0,t(null,i(e))):void 0}),n||t(null,i(null,500,"message not found or id not exist"))},$default:function(e,t){t(null,i())}}},,,,,function(e,t){},function(e,t){e.exports={header:"_3XuQ2892",back:"_1_IIGf8k",title:"_2jC9o7gf"}},function(e,t){e.exports={loading:"_2cm2hXUP",finished:"AKumWgsl",spin:"_3zXuHUyu"}},function(e,t){e.exports={from:"_1YLmEQ_b",external:"_3ZSeCsqu"}},function(e,t){e.exports={item:"_1ZtHA02R",title:"_1a13q_7p",time:"_2z582xM4"}},function(e,t){e.exports={nav:"_1HJQLwR4",link:"FuD-CNOa",dot:"_8SVpk3Qg",active:"_3zoFbV__"}}]);
//# sourceMappingURL=main.c6da7a8b.js.map